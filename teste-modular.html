<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <!-- SEO & MONETIZA√á√ÉO -->
  <title id="page-title">Calculadoras de Enfermagem Profissional | Seguran√ßa e Precis√£o</title>
  <meta name="description" content="Sistema modular de calculadoras profissionais para enfermagem com protocolos de seguran√ßa, auditoria cl√≠nica e conformidade com metas internacionais.">
  <meta name="keywords" content="calculadora enfermagem, c√°lculo medica√ß√£o, insulina, heparina, gotejamento, seguran√ßa paciente">
  <meta name="author" content="Calculadoras de Enfermagem">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/"/>
  
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Calculadoras de Enfermagem Profissional">
  <meta property="og:description" content="Sistema modular com protocolos integrados para enfermagem.">
  <meta property="og:url" content="https://auditeduca.github.io/Calculadoras-de-Enfermagem/">
  <meta property="og:image" content="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp">

  <link rel="icon" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" type="image/webp"/>

  <!-- Fontes e √çcones -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Estilos Modulares -->
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/variables-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/header-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/footer-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/accessibility-v4.css"/>
  <link rel="stylesheet" href="./css/styles.css"/>

  <!-- Bibliotecas JS (Deferidas) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { nunito: ['"Nunito Sans"','sans-serif'], inter: ['Inter','sans-serif'] },
          colors: { 
            'nurse-primary':'#1A3E74', 
            'nurse-secondary':'#00bcd4', 
            'nurse-accent':'#00838f', 
            'nurse-bgDark':'#0F172A' 
          },
          animation: {
            'slide-in': 'slideIn 0.3s ease-out',
            'fade-in': 'fadeIn 0.3s ease-out',
          }
        }
      }
    }
  </script>

  <style type="text/tailwindcss">
    @layer base {
      body { @apply bg-slate-50 text-slate-900 dark:bg-nurse-bgDark dark:text-slate-100 antialiased font-inter relative transition-colors duration-300; }
      h1 { @apply font-nunito font-black tracking-tight text-nurse-primary dark:text-cyan-400; }
      h2, h3 { @apply font-inter tracking-tight text-nurse-primary dark:text-cyan-400 font-extrabold; }
    }
    @layer components {
      .card-base { @apply bg-white dark:bg-slate-800/90 rounded-[2rem] border border-slate-200 dark:border-slate-700 shadow-sm transition-all overflow-hidden; }
      .btn-primary-action { @apply bg-nurse-primary hover:bg-nurse-secondary text-white font-bold py-4 px-8 rounded-2xl shadow-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 text-sm uppercase tracking-wider disabled:opacity-50 disabled:cursor-not-allowed; }
      .btn-secondary-action { @apply bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-200 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-wider; }
      .tab-btn { @apply flex-1 px-2 py-3 font-bold text-[10px] transition-all border-b-4 border-transparent text-slate-400 hover:text-nurse-primary whitespace-nowrap text-center uppercase tracking-wider; }
      .tab-btn.active { @apply border-nurse-secondary text-nurse-primary dark:text-cyan-400 bg-slate-50/50 dark:bg-slate-900/30; }
      .tag-pill-footer { @apply px-3 py-1.5 bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-300 rounded-lg text-[11px] font-bold hover:bg-nurse-accent hover:text-white transition-all cursor-pointer; }
      .share-btn { @apply w-10 h-10 rounded-full flex items-center justify-center bg-white/10 text-white hover:bg-white hover:text-nurse-primary transition-all shadow-md; }
    }
    
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="flex flex-col min-h-screen">

  <!-- CONTAINERS PARA M√ìDULOS MODULARES -->
  <div id="accessibility-container"></div>
  <div id="notification-container" class="fixed top-6 right-6 z-[10000] flex flex-col gap-3 pointer-events-none"></div>
  <div id="header-container" class="sticky top-0 z-50 bg-white dark:bg-nurse-bgDark min-h-[70px] transition-opacity duration-500 opacity-50 shadow-sm"></div>

  <main id="main-content" class="flex-grow max-w-7xl mx-auto px-4 pt-24 pb-8 md:py-12 w-full">
    
    <!-- BREADCRUMB RESPONSIVO -->
    <nav id="breadcrumb" class="mb-8 font-semibold">
      <div class="hidden md:flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400">
        <a href="/" class="hover:text-nurse-primary transition">In√≠cio</a>
        <i class="fa-solid fa-chevron-right text-[8px]"></i>
        <span id="breadcrumb-current" class="text-nurse-primary dark:text-cyan-400">Calculadora</span>
      </div>
    </nav>

    <!-- LAYOUT PRINCIPAL -->
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
      
      <!-- CONTE√öDO PRINCIPAL (3 colunas) -->
      <div class="lg:col-span-3">
        
        <!-- SE√á√ÉO DE ENTRADA -->
        <section class="card-base p-6 md:p-8 mb-6">
          <div class="flex items-center gap-3 mb-6 pb-4 border-b border-slate-200 dark:border-slate-700">
            <i id="calculator-icon" class="fa-solid fa-calculator text-2xl text-nurse-primary dark:text-cyan-400"></i>
            <div>
              <h1 id="calculator-title" class="text-2xl md:text-3xl font-black">Calculadora</h1>
              <p id="calculator-description" class="text-xs text-slate-500 dark:text-slate-400 mt-1">Descri√ß√£o da calculadora</p>
            </div>
          </div>

          <div id="calculator-inputs" class="space-y-4 mb-6">
            <!-- Inputs injetados dinamicamente -->
          </div>

          <!-- BOT√ïES DE A√á√ÉO -->
          <div class="flex flex-col md:flex-row gap-3 pt-4 border-t border-slate-200 dark:border-slate-700">
            <button id="btn-calculate" class="btn-primary-action flex-1">
              <i class="fa-solid fa-calculator"></i> Calcular
            </button>
            <button id="btn-reset" class="btn-secondary-action flex-1">
              <i class="fa-solid fa-rotate-left"></i> Limpar
            </button>
          </div>
        </section>

        <!-- SE√á√ÉO DE RESULTADOS -->
        <section id="calculator-results" class="mb-6">
          <!-- Resultados injetados dinamicamente -->
        </section>

        <!-- SE√á√ÉO DE COMPARTILHAMENTO -->
        <section class="card-base p-6 mb-6">
          <h3 class="text-xs font-black uppercase tracking-widest text-nurse-primary dark:text-cyan-400 mb-4 flex items-center gap-2 border-b pb-3">
            <i class="fa-solid fa-share-nodes"></i> Compartilhar
          </h3>
          <div class="flex gap-3 justify-center">
            <button onclick="window.CALCULATOR_SYSTEM?.share('facebook')" class="share-btn" title="Compartilhar no Facebook">
              <i class="fab fa-facebook-f"></i>
            </button>
            <button onclick="window.CALCULATOR_SYSTEM?.share('whatsapp')" class="share-btn" title="Compartilhar no WhatsApp">
              <i class="fab fa-whatsapp"></i>
            </button>
            <button onclick="window.CALCULATOR_SYSTEM?.share('linkedin')" class="share-btn" title="Compartilhar no LinkedIn">
              <i class="fab fa-linkedin-in"></i>
            </button>
            <button onclick="window.CALCULATOR_SYSTEM?.copyLink()" class="share-btn" title="Copiar Link">
              <i class="fas fa-link"></i>
            </button>
          </div>
        </section>

        <!-- OUTRAS CALCULADORAS -->
        <section class="card-base p-6">
          <h3 class="text-xs font-black uppercase tracking-widest text-nurse-primary dark:text-cyan-400 mb-4 flex items-center gap-2 border-b pb-3">
            <i class="fa-solid fa-list-ul"></i> Outras Calculadoras
          </h3>
          <nav id="calculator-index" class="space-y-1 text-sm">
            <a href="?calculator=insulina" class="flex items-center gap-2 px-3 py-2 rounded-lg text-slate-500 dark:text-slate-400 hover:bg-nurse-primary/5 hover:text-nurse-primary transition font-bold text-xs group">
              <i class="fa-solid fa-calculator text-[10px] opacity-30 group-hover:opacity-100 group-hover:text-nurse-secondary transition"></i>
              <span>C√°lculo de Insulina</span>
            </a>
            <a href="?calculator=heparina" class="flex items-center gap-2 px-3 py-2 rounded-lg text-slate-500 dark:text-slate-400 hover:bg-nurse-primary/5 hover:text-nurse-primary transition font-bold text-xs group">
              <i class="fa-solid fa-calculator text-[10px] opacity-30 group-hover:opacity-100 group-hover:text-nurse-secondary transition"></i>
              <span>C√°lculo de Heparina</span>
            </a>
            <a href="?calculator=medicamentos" class="flex items-center gap-2 px-3 py-2 rounded-lg text-slate-500 dark:text-slate-400 hover:bg-nurse-primary/5 hover:text-nurse-primary transition font-bold text-xs group">
              <i class="fa-solid fa-calculator text-[10px] opacity-30 group-hover:opacity-100 group-hover:text-nurse-secondary transition"></i>
              <span>Dilui√ß√£o de Medicamentos</span>
            </a>
            <a href="?calculator=gotejamento" class="flex items-center gap-2 px-3 py-2 rounded-lg text-slate-500 dark:text-slate-400 hover:bg-nurse-primary/5 hover:text-nurse-primary transition font-bold text-xs group">
              <i class="fa-solid fa-calculator text-[10px] opacity-30 group-hover:opacity-100 group-hover:text-nurse-secondary transition"></i>
              <span>C√°lculo de Gotejamento</span>
            </a>
          </nav>
        </section>
      </div>

      <!-- SIDEBAR (1 coluna) -->
      <aside class="lg:col-span-1">
        <div id="sidebar-content" class="space-y-6">
          <!-- Conte√∫do lateral injetado dinamicamente -->
        </div>
      </aside>
    </div>

    <!-- SE√á√ÉO DO AUTOR -->
    <section id="author-section" class="max-w-7xl mx-auto px-4 py-12 border-t border-slate-200 dark:border-slate-800 mt-20">
      <div class="bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 flex flex-col md:flex-row gap-10 items-center border border-slate-200 dark:border-slate-700 shadow-sm mb-12 transition-all hover:shadow-xl">
        <div class="relative flex-shrink-0">
          <div class="w-32 md:w-40 shadow-2xl border-4 border-white dark:border-slate-700 rounded-3xl overflow-hidden bg-slate-100">
            <img src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" 
                 alt="Autor Calculadoras de Enfermagem" 
                 class="w-full h-auto block object-cover"/>
          </div>
          <div class="absolute -bottom-2 -right-2 bg-nurse-secondary text-white w-8 h-8 rounded-full flex items-center justify-center border-2 border-white dark:border-slate-800 shadow-lg">
            <i class="fa-solid fa-check text-[10px]"></i>
          </div>
        </div>
        <div class="text-center md:text-left">
          <h3 class="text-2xl font-black mb-3 text-nurse-primary dark:text-cyan-400 font-nunito">Calculadoras de Enfermagem Profissional</h3>
          <p class="text-slate-600 dark:text-slate-300 text-lg leading-relaxed max-w-2xl font-inter italic">
            "Transformando a complexidade t√©cnica em seguran√ßa para o paciente atrav√©s da precis√£o dos dados e protocolos cl√≠nicos rigorosos."
          </p>
        </div>
      </div>

      <div class="flex flex-wrap gap-2 items-center">
        <span class="text-xs font-bold text-slate-400 uppercase tracking-widest mr-2 flex items-center">
          <i class="fa-solid fa-tags mr-2"></i> T√≥picos:
        </span>
        <span id="tags-container" class="flex flex-wrap gap-2">
          <!-- Tags injetadas dinamicamente -->
        </span>
      </div>
    </section>
  </main>

  <div id="footer-container" class="relative z-10 transition-opacity duration-500 opacity-50"></div>

  <!-- MODAL DE REFER√äNCIAS -->
  <div id="reference-modal" class="fixed inset-0 z-[10001] hidden">
    <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="window.MODAL_MANAGER?.close()"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl max-h-[90vh] overflow-hidden">
      <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl mx-4 overflow-hidden flex flex-col max-h-[90vh]">
        <div class="bg-nurse-primary dark:bg-slate-900 text-white p-6 flex justify-between items-center">
          <div class="flex items-center gap-3">
            <i id="modal-icon" class="fa-solid text-2xl"></i>
            <h3 id="modal-title" class="text-xl font-bold font-nunito"></h3>
          </div>
          <button onclick="window.MODAL_MANAGER?.close()" class="text-white hover:text-nurse-secondary text-xl">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
        <div id="modal-content" class="p-6 overflow-y-auto flex-grow text-sm"></div>
        <div class="bg-slate-50 dark:bg-slate-900/50 p-4 border-t border-slate-200 dark:border-slate-700">
          <button onclick="window.MODAL_MANAGER?.close()" class="w-full bg-nurse-accent hover:bg-nurse-primary text-white font-bold py-3 rounded-xl transition">
            Fechar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- PDF TEMPLATE (OCULTO) -->
  <div id="pdf-render-template" style="position: absolute; left: -9999px; top: 0; width: 794px; background: white; padding: 40px; color: #0f172a;">
    <div id="pdf-body" style="font-size: 11px; line-height: 1.6; font-family: 'Inter', sans-serif;"></div>
  </div>

  <!-- BOT√ïES FLUTUANTES DE REFER√äNCIA -->
  <div id="global-reference-buttons" class="fixed bottom-6 right-6 z-40 flex flex-col gap-3">
    <button onclick="window.MODAL_REFERENCE_MANAGER?.showNANDAModal()" class="w-12 h-12 bg-nurse-accent hover:bg-nurse-primary text-white rounded-full shadow-xl flex items-center justify-center transition-all hover:scale-110" title="Diagn√≥sticos NANDA">
      <i class="fa-solid fa-stethoscope"></i>
    </button>
    <button onclick="window.MODAL_REFERENCE_MANAGER?.showMedicationChecklistModal()" class="w-12 h-12 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all hover:scale-110" title="9 Certos da Medica√ß√£o">
      <i class="fa-solid fa-check-double"></i>
    </button>
    <button onclick="window.MODAL_REFERENCE_MANAGER?.showSafetyGoalsModal()" class="w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all hover:scale-110" title="Metas de Seguran√ßa">
      <i class="fa-solid fa-star"></i>
    </button>
  </div>

  <!-- SCRIPTS DO SISTEMA (Ordem de Carregamento Importante) -->
  <!-- M√≥dulos do sistema -->
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/event-bus-v4.js"></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/header-v4.js"></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/footer-v4.js"></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/accessibility-v4.js"></script>

  <!-- M√≥dulos do projeto -->
  <script src="./js/core.js"></script>
  <script src="./js/modules/notifications.js"></script>
  <script src="./js/modules/ui.js"></script>
  <script src="./js/modules/util.js"></script>
  <script src="./js/modules/voice.js"></script>
  <script src="./js/modules/pdf-generator.js"></script>
  <script src="./js/calculator-engine.js"></script>
  <script src="./js/modules/modal-reference.js"></script>
  <script src="./js/nursing_engine.js"></script>
  <script src="./js/main_content_injector.js"></script>
  <script src="./js/nursing_calculators.js"></script>

  <script>
    // Carregar m√≥dulos de forma s√≠ncrona
    async function loadSystemModules() {
      try {
        console.log('üöÄ Carregando m√≥dulos do sistema...');
        
        // Carregar componentes HTML
        const loadModule = async (id, url) => {
          const container = document.getElementById(id);
          if (!container) return;
          try {
            const res = await fetch(url);
            if (!res.ok) throw new Error(`Status ${res.status}`);
            container.innerHTML = await res.text();
            container.style.opacity = "1";
            const event = new CustomEvent('moduleLoaded', { detail: { id, url } });
            container.dispatchEvent(event);
          } catch(e) { 
            console.warn(`M√≥dulo ${id} n√£o carregado:`, e); 
          }
        };

        await loadModule('accessibility-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/accessibility-v4.html');
        await loadModule('header-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/header-v4.html');
        await loadModule('footer-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/footer-v4.html');
        
        console.log('‚úÖ M√≥dulos carregados com sucesso');
      } catch (error) {
        console.error('‚ùå Erro ao carregar m√≥dulos:', error);
      }
    }

    // Adicionar fun√ß√£o global para prevenir n√∫meros negativos
    window.preventNegative = function(event) {
      if (['-', 'e', '+', 'E'].includes(event.key)) {
        event.preventDefault();
        return false;
      }
      return true;
    };

    // Inicializar quando o DOM carregar
    document.addEventListener('DOMContentLoaded', () => {
      console.log('üìÑ DOM carregado, inicializando sistema...');
      loadSystemModules();
    });

    // Adicionar ao objeto global
    window.CALCULATOR_SYSTEM = window.CALCULATOR_SYSTEM || {};
  </script>
</body>
</html>
