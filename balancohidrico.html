<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <title>Calculadora de Balanço Hídrico - Controle de Líquidos | Calculadoras de Enfermagem</title>
  
  <!-- SEO & META TAGS -->
  <meta name="description" content="Realize o cálculo de Balanço Hídrico de 24h com precisão. Ferramenta para enfermagem monitorar ingestão e eliminação, prevenindo desidratação ou retenção hídrica.">
  <meta name="keywords" content="balanço hídrico, cálculo de balanço hídrico, calculadora enfermagem, controle de líquidos, diurese, ingestão hídrica, perdas e ganhos, segurança do paciente">
  <meta name="author" content="Calculadoras de Enfermagem">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/balanco-hidrico.html"/>
  
  <meta property="og:locale" content="pt_BR">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Calculadoras de Enfermagem">
  <meta property="og:title" content="Calculadora de Balanço Hídrico - Controle de Líquidos 24h">
  <meta property="og:description" content="Calcule o balanço hídrico com precisão clínica. Gere relatórios em PDF com auditoria completa para o prontuário.">
  <meta property="og:url" content="https://auditeduca.github.io/Calculadoras-de-Enfermagem/balanco-hidrico.html">
  <meta property="og:image" content="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/featured-balanco.webp">

  <link rel="icon" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" type="image/webp"/>

  <!-- Fontes e Ícones -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous"/>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Bibliotecas JS (Com Crossorigin para evitar Script Error) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" crossorigin="anonymous" defer></script>

  <!-- Configuração do Sistema -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { nunito: ['"Nunito Sans"','sans-serif'], inter: ['Inter','sans-serif'] },
          colors: { 'nurse-primary':'#1A3E74', 'nurse-secondary':'#00bcd4', 'nurse-accent':'#00838f', 'nurse-bgDark':'#0F172A' }
        }
      }
    }
    
    window.NURSE_CONFIG = { baseUrl: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/', debug: false };

    async function loadModule(id, url) {
      const container = document.getElementById(id);
      if (!container) return;
      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error(`Status ${res.status}`);
        container.innerHTML = await res.text();
        container.classList.remove('opacity-50', 'opacity-30');
        container.style.opacity = "1";
      } catch(e) { 
        console.warn(`Módulo ${id} não carregado (possível CORS ou Offline):`, e); 
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      loadModule('accessibility-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/accessibility-v4.html');
      loadModule('header-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/header-v4.html');
      loadModule('footer-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/footer-v4.html');
    });
  </script>

  <!-- Estilos CSS -->
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/variables-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/header-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/footer-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/accessibility-v4.css"/>

  <style type="text/tailwindcss">
    @layer base {
      body { @apply bg-slate-50 text-slate-900 dark:bg-nurse-bgDark dark:text-slate-100 antialiased font-inter relative transition-colors duration-300; }
      h1 { @apply font-nunito font-black tracking-tight text-nurse-primary dark:text-cyan-400; }
      h2, h3 { @apply font-inter tracking-tight text-nurse-primary dark:text-cyan-400 font-extrabold; }
    }
    @layer components {
      .card-base { @apply bg-white dark:bg-slate-800/90 rounded-[2rem] border border-slate-200 dark:border-slate-700 shadow-sm transition-all overflow-hidden; }
      .sidebar-module { @apply rounded-2xl p-6 shadow-lg text-white bg-gradient-to-br from-[#1A3E74] to-[#2E5A9C] dark:from-[#1e293b] dark:to-[#0f172a] mb-6; }
      .input-field { @apply w-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:border-nurse-secondary outline-none transition-all font-medium; }
      .btn-primary-action { @apply bg-nurse-primary hover:bg-nurse-secondary text-white font-bold py-4 px-8 rounded-2xl shadow-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 text-sm uppercase tracking-wider; }
      .btn-secondary-action { @apply bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-200 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-wider; }
      .share-btn { @apply w-11 h-11 rounded-full flex items-center justify-center bg-white/20 text-white hover:bg-white transition-all shadow-md focus:ring-2 focus:ring-white; }
      .tab-btn { @apply flex-1 px-4 py-3 font-bold text-[11px] transition-all border-b-4 border-transparent text-slate-400 hover:text-nurse-primary whitespace-nowrap text-center uppercase tracking-wider; }
      .tab-btn.active { @apply border-nurse-secondary text-nurse-primary dark:text-cyan-400 bg-slate-50/50 dark:bg-slate-900/30; }
      .label-tooltip { @apply text-nurse-secondary ml-1 cursor-help hover:text-nurse-primary transition-colors text-xs; }
      .glass-meta { @apply relative backdrop-blur-md border border-white/20 p-4 rounded-xl shadow-sm transition-all duration-300 flex items-center gap-4; }
      .glass-meta-blue { @apply bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100 border-l-4 border-blue-500; }
      .glass-meta-orange { @apply bg-orange-50 dark:bg-orange-900/20 text-orange-900 dark:text-orange-100 border-l-4 border-orange-500; }
      .toast-msg { @apply pointer-events-auto bg-slate-900 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 font-bold text-sm min-w-[320px] border-l-4 border-nurse-secondary; animation: slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
      .tag-pill-footer { @apply px-3 py-1.5 bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-300 rounded-lg text-[11px] font-bold hover:bg-nurse-accent hover:text-white transition-all cursor-pointer; }
    }
    @keyframes slide-in { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    #pdf-render-template { position: absolute; left: -9999px; top: 0; width: 794px; min-height: 1123px; background: white; padding: 40px; color: #0f172a; display: flex; flex-direction: column; }
  </style>
</head>
<body class="flex flex-col min-h-screen">

  <div class="fixed inset-0 z-[-1] pointer-events-none opacity-20 dark:opacity-10">
    <svg width="100%" height="100%" viewBox="0 0 1440 1000" preserveAspectRatio="none">
        <path d="M-100,200 C300,150 600,350 1500,250" fill="none" stroke="#00bcd4" stroke-width="2" />
        <path d="M-100,600 C400,550 800,700 1600,500" fill="none" stroke="#1A3E74" stroke-width="2" />
    </svg>
  </div>

  <div id="notification-container" class="fixed top-6 right-6 z-[10000] flex flex-col gap-3 pointer-events-none"></div>
  <div id="accessibility-container"></div>
  <div id="header-container" class="sticky top-0 z-50 bg-white dark:bg-nurse-bgDark min-h-[70px] transition-opacity duration-500 opacity-50"></div>

  <main id="main-content" class="flex-grow max-w-7xl mx-auto px-4 pt-24 pb-8 md:py-12 w-full">
    
    <nav class="flex items-center gap-2 text-sm text-slate-600 dark:text-cyan-300 mb-8 font-semibold" aria-label="Breadcrumb">
        <a href="index.html" class="hover:underline text-nurse-accent">Início</a>
        <i class="fa-solid fa-chevron-right text-[10px]"></i>
        <a href="ferramentas.html" class="hover:underline text-nurse-accent">Ferramentas</a>
        <i class="fa-solid fa-chevron-right text-[10px]"></i>
        <span class="hidden md:inline hover:underline text-nurse-accent cursor-pointer">Calculadoras Clínicas</span>
        <i class="fa-solid fa-chevron-right text-[10px] hidden md:inline"></i>
        <span class="text-nurse-primary dark:text-cyan-400 font-bold md:hidden">Balanço Hídrico</span>
        <span class="text-nurse-primary dark:text-cyan-400 font-bold hidden md:inline">Cálculo de Balanço Hídrico</span>
    </nav>

    <header class="max-w-4xl mb-12">
      <span class="bg-nurse-primary text-white text-[11px] font-bold px-4 py-2 rounded-full uppercase tracking-widest mb-4 inline-block shadow-md">Calculadoras Clínicas</span>
      <h1 class="text-4xl md:text-5xl lg:text-6xl mb-6 leading-tight">Cálculo de Balanço Hídrico</h1>
      <div class="h-2 w-24 bg-gradient-to-r from-nurse-accent to-nurse-primary rounded-full mb-8"></div>
      <p class="text-xl text-slate-600 dark:text-slate-300 font-medium italic">Ferramenta para controle rigoroso de entradas e saídas de líquidos, essencial para o equilíbrio volêmico.</p>
    </header>

    <div class="grid lg:grid-cols-[1fr,340px] gap-10 items-start">
      
      <article class="card-base p-0">
         <nav class="flex border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/30">
            <button onclick="switchTab('calc')" id="btn-tab-calc" class="tab-btn active">Calculadora</button>
            <button onclick="switchTab('sobre')" id="btn-tab-sobre" class="tab-btn">Sobre</button>
            <button onclick="switchTab('ajuda')" id="btn-tab-ajuda" class="tab-btn">Instruções</button>
            <button onclick="switchTab('tecnico')" id="btn-tab-tecnico" class="tab-btn">Técnico</button>
         </nav>

         <div class="p-6 md:p-10">
            <!-- ABA: CALCULADORA -->
            <section id="pane-calc" class="tab-pane space-y-10">
                <div class="space-y-6">
                    <h3 class="text-xs font-black uppercase tracking-widest text-nurse-primary/50 mb-4 border-b pb-2">Dados do Paciente</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label for="patient_name" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                Nome do Paciente <i class="fa-solid fa-circle-info label-tooltip" title="Identificação completa para registro seguro"></i>
                            </label>
                            <input id="patient_name" type="text" placeholder="Nome completo" class="input-field"/>
                        </div>
                        <div>
                            <label for="patient_birthdate" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                Data de Nascimento <i class="fa-solid fa-circle-info label-tooltip" title="Para confirmação inequívoca (Meta 1)"></i>
                            </label>
                            <input id="patient_birthdate" type="date" max="9999-12-31" class="input-field text-sm" oninput="validateBirthDate()"/>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- COLUNA GANHOS -->
                        <div class="space-y-4">
                            <h3 class="text-xs font-black uppercase tracking-widest text-nurse-secondary mb-2 flex items-center gap-2">
                                <i class="fa-solid fa-circle-plus"></i> Ingestão (Ganhos)
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <label for="ganhoOral" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Via Oral (VO) <i class="fa-solid fa-circle-info label-tooltip" title="Água, sucos, chás, sopas"></i>
                                    </label>
                                    <input id="ganhoOral" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                                <div>
                                    <label for="ganhoSonda" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Sondas (Enteral) <i class="fa-solid fa-circle-info label-tooltip" title="Água lavagem e dietas via SNE/GTT"></i>
                                    </label>
                                    <input id="ganhoSonda" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                                <div>
                                    <label for="ganhoEv" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Parenteral (EV/Soros) <i class="fa-solid fa-circle-info label-tooltip" title="Soros, medicações, NPT, expansores"></i>
                                    </label>
                                    <input id="ganhoEv" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                                <div>
                                    <label for="ganhoOutros" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Outros <i class="fa-solid fa-circle-info label-tooltip" title="Hemoderivados, plasma, etc."></i>
                                    </label>
                                    <input id="ganhoOutros" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                            </div>
                        </div>

                        <!-- COLUNA PERDAS -->
                        <div class="space-y-4">
                            <h3 class="text-xs font-black uppercase tracking-widest text-red-500 mb-2 flex items-center gap-2">
                                <i class="fa-solid fa-circle-minus"></i> Eliminação (Perdas)
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <label for="perdaUrina" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Diurese (Urina) <i class="fa-solid fa-circle-info label-tooltip" title="Volume urinário total aferido"></i>
                                    </label>
                                    <input id="perdaUrina" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                                <div>
                                    <label for="perdaDrenos" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Drenos <i class="fa-solid fa-circle-info label-tooltip" title="Tórax, portovac, penrose, JP"></i>
                                    </label>
                                    <input id="perdaDrenos" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                                <div>
                                    <label for="perdaVomitos" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Vômitos / SNG Aberta <i class="fa-solid fa-circle-info label-tooltip" title="Volume de estase ou êmese"></i>
                                    </label>
                                    <input id="perdaVomitos" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                                <div>
                                    <label for="perdaOutros" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                        Outros <i class="fa-solid fa-circle-info label-tooltip" title="Diarréia líquida, sangramentos, etc."></i>
                                    </label>
                                    <input id="perdaOutros" type="number" min="0" placeholder="0 ml" class="input-field font-bold text-nurse-primary dark:text-cyan-400" onkeydown="preventNegative(event)"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 pt-4">
                    <button onclick="calcularBalanco()" class="btn-primary-action"><i class="fa-solid fa-calculator"></i> Calcular</button>
                    <button onclick="resetForm()" class="btn-secondary-action"><i class="fa-solid fa-rotate-left"></i> Limpar</button>
                </div>

                <!-- ÁREA DE RESULTADOS -->
                <div id="results-wrapper" class="hidden animate-fade-in pt-8 border-t border-slate-200 dark:border-slate-700">
                    <div class="bg-slate-50 dark:bg-slate-800/50 rounded-3xl p-8 text-center border-2 border-dashed border-nurse-primary/20 mb-10">
                        <p class="text-[10px] text-slate-400 font-black uppercase tracking-[0.3em] mb-4">Balanço Hídrico Final (24h)</p>
                        
                        <!-- Resultado Principal (Big Number) -->
                        <div id="res-final" class="text-6xl md:text-8xl font-black text-[#1A3E74] dark:text-cyan-400 tracking-tighter font-nunito leading-none mb-4">+0</div>
                        <p class="text-lg font-black text-nurse-secondary mb-6 uppercase tracking-widest">Mililitros (ml)</p>
                        
                        <!-- Subdetalhes Centralizados -->
                        <div class="flex justify-center gap-8 text-xs font-bold uppercase tracking-widest border-t border-slate-200 dark:border-slate-700 pt-6 max-w-md mx-auto">
                            <div class="text-nurse-secondary">
                                <i class="fa-solid fa-circle-plus mr-1"></i> Ganhos: <span id="res-total-ganhos">0</span>
                            </div>
                            <div class="text-red-500">
                                <i class="fa-solid fa-circle-minus mr-1"></i> Perdas: <span id="res-total-perdas">0</span>
                            </div>
                        </div>

                        <div id="res-interpretacao" class="mt-6 text-sm font-bold"></div>
                    </div>

                    <!-- BOTÕES DE AÇÃO -->
                    <div class="flex flex-wrap gap-4 justify-center mb-10">
                        <button onclick="gerarPDF()" class="btn-primary-action px-10"><i class="fa-solid fa-file-pdf"></i> Gerar PDF</button>
                        <button onclick="copiarResumo()" class="btn-secondary-action px-8"><i class="fa-solid fa-copy"></i> Copiar</button>
                    </div>

                    <!-- BUSCA DIAGNÓSTICO -->
                    <div class="card-base p-6 border-l-4 border-nurse-accent bg-slate-50 dark:bg-slate-900/40 mb-10">
                        <h3 class="text-sm font-black uppercase tracking-widest text-nurse-primary mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-book-medical"></i> Diagnóstico NANDA
                        </h3>
                        <p class="text-xs text-slate-500 dark:text-slate-400 mb-4 leading-relaxed">Pesquise diagnósticos relacionados como "Volume de Líquidos Excessivo" ou "Risco de Desequilíbrio Eletrolítico".</p>
                        <button onclick="showNanda()" class="w-full sm:w-auto bg-nurse-accent text-white px-6 py-3 rounded-xl font-bold text-xs uppercase tracking-widest hover:brightness-110 transition shadow-lg flex items-center justify-center gap-2">
                            Pesquisar Diagnósticos <i class="fa-solid fa-magnifying-glass"></i>
                        </button>
                    </div>

                    <!-- AUDITORIA -->
                    <div class="mb-12">
                         <h3 class="text-xs font-black uppercase tracking-widest mb-6 flex items-center gap-2"><i class="fa-solid fa-clipboard-check"></i> Auditoria do Cálculo</h3>
                         <ul class="space-y-3">
                            <!-- DADOS DO PACIENTE -->
                            <li class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/40 rounded-xl text-sm border border-slate-100 dark:border-slate-700">
                                <span class="text-slate-500 font-bold uppercase text-[10px]">Dados do Paciente</span>
                                <span class="font-bold text-nurse-primary dark:text-cyan-400 text-right"><span id="audit-nome">---</span><br><span id="audit-nasc" class="text-xs text-slate-400 font-normal">---</span></span>
                            </li>
                            <!-- PARÂMETROS DO CÁLCULO -->
                            <li class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/40 rounded-xl text-sm border border-slate-100 dark:border-slate-700">
                                <span class="text-slate-500 font-bold uppercase text-[10px]">Parâmetros do Cálculo</span>
                                <div class="text-right">
                                    <span class="font-bold text-nurse-primary dark:text-cyan-400 block">Entradas: <span id="audit-total-ganhos">---</span></span>
                                    <span class="text-xs text-slate-400">Saídas: <span id="audit-total-perdas">---</span></span>
                                </div>
                            </li>
                            <!-- FÓRMULA APLICADA -->
                            <li class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/40 rounded-xl text-sm border border-slate-100 dark:border-slate-700">
                                <span class="text-slate-500 font-bold uppercase text-[10px]">Fórmula Aplicada</span>
                                <span id="res-formula-box" class="font-mono text-xs font-bold text-nurse-primary dark:text-cyan-400 text-right">Ganhos - Perdas = Saldo</span>
                            </li>
                            <!-- RESULTADO -->
                            <li class="flex items-center justify-between p-4 bg-nurse-primary/5 dark:bg-nurse-primary/20 rounded-xl text-sm border border-nurse-primary/10">
                                <span class="text-nurse-primary font-bold uppercase text-[10px]">Resultado</span>
                                <span id="audit-resultado" class="font-black text-nurse-primary dark:text-cyan-400 text-right">---</span>
                            </li>
                         </ul>
                    </div>

                    <!-- CHECKLISTS -->
                    <section>
                        <h2 class="text-xl md:text-2xl font-black text-center mb-8 flex items-center justify-center gap-3 text-nurse-primary dark:text-cyan-400">
                            <i class="fa-solid fa-shield-virus"></i> Check-list de Segurança do Paciente
                        </h2>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xs font-black uppercase tracking-widest mb-4 border-b border-slate-200 dark:border-slate-700 pb-2">Metas Internacionais de Segurança</h3>
                                <div id="checklist-metas" class="space-y-2"></div>
                            </div>
                        </div>
                    </section>
                </div>
            </section>

            <!-- ABAS INFORMATIVAS -->
            <section id="pane-sobre" class="tab-pane hidden prose prose-slate dark:prose-invert max-w-none">
                <h2 class="text-2xl font-black mb-4">Sobre o Balanço Hídrico</h2>
                <p class="text-aaa">O Balanço Hídrico (BH) é a contabilização rigorosa de todos os líquidos que entram e saem do organismo em um período de 24 horas. É uma ferramenta fundamental na avaliação da função renal, cardíaca e no ajuste de terapias diuréticas ou de reposição volêmica.</p>
            </section>

            <section id="pane-ajuda" class="tab-pane hidden prose prose-slate dark:prose-invert max-w-none">
                <h2 class="text-2xl font-black mb-4">Instruções</h2>
                <ol class="space-y-2 text-aaa text-sm">
                    <li>Preencha a identificação do paciente para o registro de auditoria.</li>
                    <li>Insira todos os volumes de entradas (Soro, Dieta, Água) em mililitros.</li>
                    <li>Insira todos os volumes de saídas (Urina, Drenos, Vômitos) em mililitros.</li>
                    <li>O sistema calculará automaticamente o saldo e indicará se é positivo ou negativo.</li>
                </ol>
            </section>

            <section id="pane-tecnico" class="tab-pane hidden prose prose-slate dark:prose-invert max-w-none">
                <h2 class="text-2xl font-black mb-4">Informações Técnicas</h2>
                <div class="bg-slate-100 dark:bg-slate-800 p-6 rounded-2xl text-sm text-aaa">
                    <p><strong>Meta de Segurança:</strong> Valores de balanço positivo extremo (>1000ml) ou negativo extremo (<-1000ml) devem ser comunicados imediatamente à equipe médica.</p>
                    <p class="mt-2"><strong>Referência:</strong> Potter & Perry - Fundamentos de Enfermagem.</p>
                </div>
            </section>
         </div>
      </article>

      <!-- SIDEBAR -->
      <aside class="space-y-6 sticky top-28 self-start">
         <div class="sidebar-module">
            <h3 class="border-b-2 border-white/20 pb-4 mb-5 font-bold flex items-center gap-3 text-xl text-white font-nunito"><i class="fa-solid fa-trophy"></i> Desafio Clínico</h3>
            <p class="text-sm text-white/90 mb-6 font-medium leading-relaxed font-inter">Teste seus conhecimentos sobre reposição volêmica e distúrbios eletrolíticos.</p>
            <button onclick="redirectSimulados()" class="w-full bg-white text-nurse-primary font-black py-3 rounded-xl hover:bg-slate-100 transition shadow-lg text-sm uppercase tracking-wide">Acessar Simulados <i class="fa-solid fa-bolt ml-1"></i></button>
         </div>

         <div class="sidebar-module from-teal-700 to-nurse-secondary shadow-nurse-accent/20">
            <h3 class="border-b-2 border-white/20 pb-4 mb-5 font-bold flex items-center gap-3 text-xl text-white font-nunito"><i class="fas fa-share-nodes"></i> Compartilhar</h3>
            <div class="flex gap-3 flex-wrap justify-start">
                <button class="share-btn hover:text-blue-600" onclick="share('facebook')"><i class="fab fa-facebook-f"></i></button>
                <button class="share-btn hover:text-green-500" onclick="share('whatsapp')"><i class="fab fa-whatsapp"></i></button>
                <button class="share-btn hover:text-blue-800" onclick="share('linkedin')"><i class="fab fa-linkedin-in"></i></button>
                <button class="share-btn hover:text-gray-300" onclick="copyLink()"><i class="fas fa-link"></i></button>
            </div>
         </div>
      </aside>
    </div>

    <!-- RELACIONADOS & FOOTER -->
    <section id="related-section" class="bg-slate-200/50 dark:bg-nurse-bgDark py-24 border-t border-slate-300 dark:border-slate-800 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 mt-24">
        <div class="max-w-7xl mx-auto text-center">
            <h2 class="text-3xl font-black mb-16 flex items-center justify-center gap-4 font-nunito"><i class="fa-solid fa-layer-group text-nurse-accent"></i> Conteúdo Relacionado</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <a href="insulina.html" class="group card-base overflow-hidden bg-white hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 flex flex-col h-full text-left">
                    <div class="relative h-52 bg-nurse-primary/5 flex items-center justify-center overflow-hidden shrink-0">
                        <i class="fa-solid fa-syringe text-6xl text-nurse-primary group-hover:scale-110 transition-transform duration-700"></i>
                        <span class="tag-pill-abs absolute bottom-4 left-4">Calculadora</span>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <h3 class="text-xl font-black mb-3 group-hover:text-nurse-secondary transition-colors font-nunito line-clamp-2">Cálculo de Insulina</h3>
                        <p class="text-slate-500 text-sm mb-6 flex-grow">Aspiração segura de doses de insulina.</p>
                        <span class="text-nurse-secondary text-sm font-bold flex items-center gap-2 mt-auto">Acessar <i class="fa-solid fa-arrow-right-long ml-2"></i></span>
                    </div>
                </a>
                <a href="heparina.html" class="group card-base overflow-hidden bg-white hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 flex flex-col h-full text-left">
                    <div class="relative h-52 bg-nurse-primary/5 flex items-center justify-center overflow-hidden shrink-0">
                        <i class="fa-solid fa-vial text-6xl text-nurse-primary group-hover:scale-110 transition-transform duration-700"></i>
                        <span class="tag-pill-abs absolute bottom-4 left-4">Calculadora</span>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <h3 class="text-xl font-black mb-3 group-hover:text-nurse-secondary transition-colors font-nunito line-clamp-2">Cálculo de Heparina</h3>
                        <p class="text-slate-500 text-sm mb-6 flex-grow">Segurança na administração de anticoagulantes.</p>
                        <span class="text-nurse-secondary text-sm font-bold flex items-center gap-2 mt-auto">Acessar <i class="fa-solid fa-arrow-right-long ml-2"></i></span>
                    </div>
                </a>
                 <a href="gotejamento.html" class="group card-base overflow-hidden bg-white hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 flex flex-col h-full text-left">
                    <div class="relative h-52 bg-nurse-secondary/5 flex items-center justify-center overflow-hidden shrink-0">
                        <i class="fa-solid fa-droplet text-6xl text-nurse-secondary group-hover:scale-110 transition-transform duration-700"></i>
                        <span class="tag-pill-abs absolute bottom-4 left-4">Calculadora</span>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <h3 class="text-xl font-black mb-3 group-hover:text-nurse-secondary transition-colors font-nunito line-clamp-2">Gotejamento de Soro</h3>
                        <p class="text-slate-500 text-sm mb-6 flex-grow">Cálculo de gotas e microgotas para infusões.</p>
                        <span class="text-nurse-secondary text-sm font-bold flex items-center gap-2 mt-auto">Acessar <i class="fa-solid fa-arrow-right-long ml-2"></i></span>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <section class="max-w-7xl mx-auto px-4 py-12 border-t border-slate-200 dark:border-slate-800">
        <div class="bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 flex flex-col md:flex-row gap-10 items-center border border-slate-200 dark:border-slate-700 shadow-sm mb-12">
            <img src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" alt="Autor" class="w-28 h-28 rounded-full object-cover shadow-xl border-4 border-white dark:border-slate-800"/>
            <div class="text-center md:text-left">
                <h3 class="text-2xl font-black mb-3 text-nurse-primary dark:text-cyan-400 font-nunito">Calculadoras de Enfermagem</h3>
                <p class="text-slate-600 dark:text-slate-300 text-lg leading-relaxed max-w-2xl font-inter italic">"A precisão técnica é a expressão máxima do cuidado ético ao paciente."</p>
            </div>
        </div>
        <div class="flex flex-wrap gap-2 items-center">
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest mr-2 flex items-center"><i class="fa-solid fa-tags mr-2"></i> Tópicos:</span>
            <span class="tag-pill-footer">#Enfermagem</span><span class="tag-pill-footer">#BalançoHídrico</span><span class="tag-pill-footer">#UTI</span>
        </div>
    </section>
  </main>

  <div id="footer-container" class="relative z-10 bg-nurse-primary dark:bg-slate-900 min-h-[150px] transition-opacity duration-500"></div>
  
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/event-bus-v4.js" crossorigin="anonymous" defer></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/header-v4.js" crossorigin="anonymous" defer></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/footer-v4.js" crossorigin="anonymous" defer></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/accessibility-v4.js" crossorigin="anonymous" defer></script>

  <!-- TEMPLATE PDF OCULTO -->
  <div id="pdf-render-template">
    <div style="flex: 1; display: flex; flex-direction: column;">
      <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid #1A3E74; padding-bottom: 10px; margin-bottom: 20px;">
        <img src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" style="height: 50px;" alt="Logo"/>
        <div style="text-align: right;">
          <h1 style="font-family: 'Nunito Sans', sans-serif; font-size: 18px; color: #1A3E74; margin: 0; font-weight: 900; text-transform: uppercase;">Registro de Balanço Hídrico (24h)</h1>
          <p style="font-size: 9px; color: #64748b; margin: 0; font-weight: 600;">CALCULADORAS CLÍNICAS - ENFERMAGEM</p>
        </div>
      </div>
      <div id="pdf-body" style="font-size: 10px; font-family: 'Inter', sans-serif; flex: 1;"></div>
    </div>
    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: flex-end;">
      <div style="font-size: 8px; color: #94a3b8;"><p id="pdf-footer-timestamp" style="margin: 0; font-weight: 700;"></p></div>
      <div id="pdf-qrcode-container" style="width: 60px; height: 60px;"></div>
    </div>
  </div>

  <script>
    const APP_STATE = { data: null };
    const CONSTS = {
        METAS: [ { id: 1, text: "Identificar corretamente o paciente", class: "glass-meta-blue" }, { id: 2, text: "Comunicação Efetiva (Passagem de Plantão)", class: "glass-meta-orange" }, { id: 6, text: "Reduzir o risco de quedas (Desequilíbrio)", class: "glass-meta-blue" } ]
    };

    const safeSet = (id, val, isHTML=false) => { const el=document.getElementById(id); if(el) el[isHTML?'innerHTML':'innerText']=val; };
    const showNotification = (msg) => {
        const c=document.getElementById('notification-container'); if(!c)return;
        const t=document.createElement('div'); t.className='toast-msg'; t.innerHTML=`<i class="fa-solid fa-circle-info text-nurse-secondary text-lg"></i><span>${msg}</span>`;
        c.appendChild(t); setTimeout(()=>{t.style.opacity='0';t.style.transform='translateX(50px)';setTimeout(()=>t.remove(),500)},3500);
    };

    function calcularBalanco() {
        const pName = document.getElementById('patient_name')?.value || "Não Identificado";
        const pDob = document.getElementById('patient_birthdate')?.value || "Não Informada";

        // Ganhos
        const gOral = parseFloat(document.getElementById('ganhoOral').value) || 0;
        const gSonda = parseFloat(document.getElementById('ganhoSonda').value) || 0;
        const gEv = parseFloat(document.getElementById('ganhoEv').value) || 0;
        const gOutros = parseFloat(document.getElementById('ganhoOutros').value) || 0;
        const tGanhos = gOral + gSonda + gEv + gOutros;

        // Perdas
        const pUrina = parseFloat(document.getElementById('perdaUrina').value) || 0;
        const pDrenos = parseFloat(document.getElementById('perdaDrenos').value) || 0;
        const pVomitos = parseFloat(document.getElementById('perdaVomitos').value) || 0;
        const pOutros = parseFloat(document.getElementById('perdaOutros').value) || 0;
        const tPerdas = pUrina + pDrenos + pVomitos + pOutros;

        const balanco = tGanhos - tPerdas;
        
        APP_STATE.data = {
            name: pName, dob: pDob,
            gains: { oral: gOral, sonda: gSonda, ev: gEv, outros: gOutros, total: tGanhos },
            losses: { urina: pUrina, drenos: pDrenos, vomitos: pVomitos, outros: pOutros, total: tPerdas },
            balance: balanco,
            timestamp: new Date().toLocaleString()
        };

        updateUI(APP_STATE.data);
        
        const wrap = document.getElementById('results-wrapper');
        wrap.classList.remove('hidden');
        wrap.scrollIntoView({ behavior: 'smooth' });
        showNotification("Balanço Calculado!");
    }

    function updateUI(d) {
        safeSet('res-total-ganhos', `${d.gains.total} ml`);
        safeSet('res-total-perdas', `${d.losses.total} ml`);
        
        const signal = d.balance > 0 ? '+' : '';
        const resEl = document.getElementById('res-final');
        resEl.innerText = `${signal}${d.balance}`;
        
        const interpEl = document.getElementById('res-interpretacao');
        if (d.balance > 500) {
            interpEl.innerHTML = `<span class="text-nurse-primary"><i class="fa-solid fa-arrow-trend-up"></i> Balanço Positivo</span> (Risco de Hipervolemia)`;
            resEl.className = "text-6xl md:text-8xl font-black text-nurse-primary dark:text-cyan-400 tracking-tighter font-nunito leading-none mb-4";
        } else if (d.balance < -500) {
            interpEl.innerHTML = `<span class="text-red-500"><i class="fa-solid fa-arrow-trend-down"></i> Balanço Negativo</span> (Risco de Desidratação)`;
            resEl.className = "text-6xl md:text-8xl font-black text-red-500 tracking-tighter font-nunito leading-none mb-4";
        } else {
            interpEl.innerHTML = `<span class="text-green-500"><i class="fa-solid fa-scale-balanced"></i> Equilíbrio Hídrico</span>`;
            resEl.className = "text-6xl md:text-8xl font-black text-green-500 tracking-tighter font-nunito leading-none mb-4";
        }

        // AUDITORIA DO CÁLCULO
        safeSet('audit-nome', d.name); safeSet('audit-nasc', d.dob);
        safeSet('audit-total-ganhos', `${d.gains.total} ml`);
        safeSet('audit-total-perdas', `${d.losses.total} ml`);
        safeSet('audit-resultado', `${signal}${d.balance} ml`);

        // Checklists (9 Certos removido pois é Balanço Hídrico, Metas mantidas)
        safeSet('checklist-metas', CONSTS.METAS.map(m=>`<label class="glass-meta ${m.class} cursor-pointer hover:scale-[1.02]"><input type="checkbox" class="w-5 h-5 accent-white shrink-0"><span class="text-xs font-black uppercase">${m.id}. ${m.text}</span></label>`).join(''), true);
    }

    function showNanda() {
        let q = 'NANDA NIC NOC Balanço Hídrico Enfermagem';
        if (APP_STATE.data) q = `Diagnóstico Enfermagem Balanço ${APP_STATE.data.balance > 0 ? 'Positivo' : 'Negativo'} Excessivo`;
        showNotification("Pesquisando diagnósticos...");
        window.open(`https://www.google.com/search?q=${encodeURIComponent(q)}`, '_blank');
    }

    async function gerarPDF() {
        if (!APP_STATE.data) return;
        showNotification("Gerando PDF...");
        const d = APP_STATE.data;
        safeSet('pdf-footer-timestamp', `Data: ${d.timestamp}`);
        safeSet('pdf-body', `
            <div style="padding:15px;background:#f8fafc;border-radius:8px;border:1px solid #e2e8f0;margin-bottom:15px;font-size:11px;">
                <p>Paciente: <strong>${d.name}</strong> | Nasc: <strong>${d.dob}</strong></p>
            </div>
            <div style="display:flex;gap:15px;margin-bottom:15px;">
                <div style="flex:1;border:1px solid #00bcd4;border-radius:10px;padding:10px;">
                   <h3 style="color:#00bcd4;font-weight:900;border-bottom:1px solid #e2e8f0;margin:0 0 10px 0;">GANHOS (+)</h3>
                   <p>Oral: ${d.gains.oral} ml</p>
                   <p>Sonda: ${d.gains.sonda} ml</p>
                   <p>EV: ${d.gains.ev} ml</p>
                   <p>Outros: ${d.gains.outros} ml</p>
                   <p style="font-weight:800;margin-top:5px;">TOTAL: ${d.gains.total} ml</p>
                </div>
                <div style="flex:1;border:1px solid #ef4444;border-radius:10px;padding:10px;">
                   <h3 style="color:#ef4444;font-weight:900;border-bottom:1px solid #e2e8f0;margin:0 0 10px 0;">PERDAS (-)</h3>
                   <p>Urina: ${d.losses.urina} ml</p>
                   <p>Drenos: ${d.losses.drenos} ml</p>
                   <p>Vômitos: ${d.losses.vomitos} ml</p>
                   <p>Outros: ${d.losses.outros} ml</p>
                   <p style="font-weight:800;margin-top:5px;">TOTAL: ${d.losses.total} ml</p>
                </div>
            </div>
            <div style="padding:15px;background:#1A3E74;color:white;border-radius:10px;text-align:center;">
                <h2 style="margin:0;font-size:16px;">BALANÇO FINAL: ${d.balance > 0 ? '+' : ''}${d.balance} ml</h2>
            </div>`, true);

        const qc = document.getElementById('pdf-qrcode-container');
        if (qc) { 
           qc.innerHTML = ''; 
           if(window.QRCode) {
             try { new QRCode(qc, { text: window.location.href, width: 60, height: 60 }); } catch(e) { console.warn("QR Error", e); }
           }
        }
        
        try {
            if (!window.jspdf || !window.html2canvas) { showNotification("Erro: Biblioteca PDF não carregada."); return; }
            const canvas = await html2canvas(document.getElementById('pdf-render-template'), { scale: 2, useCORS: true });
            const doc = new window.jspdf.jsPDF('p', 'pt', 'a4');
            doc.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, doc.internal.pageSize.getWidth(), (canvas.height * doc.internal.pageSize.getWidth()) / canvas.width);
            doc.save(`BalancoHidrico-${d.name.replace(/\s+/g, '-')}.pdf`);
        } catch (e) { console.warn("PDF Error", e); showNotification("Erro ao gerar PDF."); }
    }

    function copiarResumo() {
        if (!APP_STATE.data) return;
        const d = APP_STATE.data;
        const t = `BALANÇO HÍDRICO\nPaciente: ${d.name}\nGanhos: ${d.gains.total} ml\nPerdas: ${d.losses.total} ml\nSALDO: ${d.balance > 0 ? '+' : ''}${d.balance} ml`;
        
        try {
          const el = document.createElement("textarea");
          el.value = t;
          document.body.appendChild(el);
          el.select();
          document.execCommand('copy');
          document.body.removeChild(el);
          showNotification("Resumo Copiado!");
        } catch(e) {
          showNotification("Erro ao copiar.");
        }
    }

    function switchTab(id) {
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.add('hidden'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`pane-${id}`)?.classList.remove('hidden');
        document.getElementById(`btn-tab-${id}`)?.classList.add('active');
        if (id === 'calc' && APP_STATE.data) document.getElementById('results-wrapper').classList.remove('hidden');
    }

    function resetForm() {
        document.querySelectorAll('input').forEach(i => i.value = '');
        document.getElementById('results-wrapper').classList.add('hidden');
        APP_STATE.data = null;
        showNotification("Formulário limpo!");
    }

    function validateBirthDate() {
        const el = document.getElementById('patient_birthdate');
        if (el?.value) { const p = el.value.split('-'); if (p[0].length > 4) el.value = `${p[0].substring(0,4)}-${p[1]}-${p[2]}`; }
    }
    
    function preventNegative(e) { if(['-','e','+'].includes(e.key)) e.preventDefault(); }
    function redirectSimulados() { window.open('https://simulados-para-enfermagem.com.br/', '_blank'); }
    function copyLink() { 
        try {
          const el = document.createElement("textarea");
          el.value = window.location.href;
          document.body.appendChild(el);
          el.select();
          document.execCommand('copy');
          document.body.removeChild(el);
          showNotification("Link copiado!"); 
        } catch(e) { showNotification("Erro ao copiar link."); }
    }
    function share(p) {
        const u = encodeURIComponent(window.location.href);
        const m = { whatsapp: `https://api.whatsapp.com/send?text=${u}`, facebook: `https://www.facebook.com/sharer/sharer.php?u=${u}`, linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${u}` };
        if(m[p]) window.open(m[p], '_blank');
    }
  </script>
</body>
</html>