<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <title>Índice de Apgar - Escalas Clínicas | Calculadoras de Enfermagem</title>
  <meta name="description" content="Calculadora profissional do Índice de Apgar para avaliação neonatal. Inclui cálculo de idade exata, auditoria técnica e checklist de segurança do paciente."/>
  <meta name="author" content="Calculadoras de Enfermagem"/>
  <link rel="canonical" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/apgar.html"/>
  <link rel="icon" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" type="image/webp"/>

  <!-- [DEPENDÊNCIAS EXTERNAS - Padrão V4.4] -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>

  <!-- [CONFIGURAÇÃO DO TEMA] -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { nunito: ['"Nunito Sans"','sans-serif'], inter: ['Inter','sans-serif'] },
          colors: { 'nurse-primary':'#1A3E74', 'nurse-secondary':'#00bcd4', 'nurse-accent':'#00838f', 'nurse-bgDark':'#0F172A' }
        }
      }
    }
    
    window.NURSE_CONFIG = { baseUrl: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/', debug: false };

    async function loadModule(id, url) {
      const container = document.getElementById(id);
      if (!container) return;
      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error(`Erro ao carregar ${url}`);
        container.innerHTML = await res.text();
        container.classList.remove('opacity-50', 'opacity-30');
        container.style.opacity = "1";
      } catch(e) { console.error(e); }
    }

    window.addEventListener('DOMContentLoaded', () => {
      loadModule('accessibility-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/accessibility-v4.html');
      loadModule('header-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/header-v4.html');
      loadModule('footer-container', 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/footer-v4.html');
    });
  </script>

  <!-- [ESTILOS GLOBAIS] -->
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/variables-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/header-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/footer-v4.css"/>
  <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/accessibility-v4.css"/>

  <style type="text/tailwindcss">
    @layer base {
      body { @apply bg-slate-50 text-slate-900 dark:bg-nurse-bgDark dark:text-slate-100 antialiased font-inter relative transition-colors duration-300; }
      h1 { @apply font-nunito font-black tracking-tight text-nurse-primary dark:text-cyan-400 leading-tight; }
      h2, h3 { @apply font-inter tracking-tight text-nurse-primary dark:text-cyan-400 font-extrabold; }
    }
    @layer components {
      .card-base { @apply bg-white dark:bg-slate-800/90 rounded-[2rem] border border-slate-200 dark:border-slate-700 shadow-sm transition-all overflow-hidden; }
      .sidebar-module { @apply rounded-2xl p-6 shadow-lg text-white bg-gradient-to-br from-[#1A3E74] to-[#2E5A9C] dark:from-[#1e293b] dark:to-[#0f172a] mb-6; }
      
      .input-field { @apply w-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:border-nurse-secondary outline-none transition-all font-medium; }
      .btn-primary-action { @apply bg-nurse-primary hover:bg-nurse-secondary text-white font-bold py-4 px-8 rounded-2xl shadow-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 text-sm uppercase tracking-wider h-14; }
      .btn-secondary-action { @apply bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-200 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-wider h-14; }
      .btn-action-equal { @apply flex-1 h-14 rounded-2xl font-bold uppercase text-xs tracking-widest transition-all active:scale-95 flex items-center justify-center gap-2 shadow-lg; }
      
      .share-btn { @apply w-11 h-11 rounded-full flex items-center justify-center bg-white/20 text-white hover:bg-white transition-all shadow-md focus:ring-2 focus:ring-white; }
      .tab-btn { @apply flex-1 px-4 py-3 font-bold text-[11px] transition-all border-b-4 border-transparent text-slate-400 hover:text-nurse-primary whitespace-nowrap text-center uppercase tracking-wider; }
      .tab-btn.active { @apply border-nurse-secondary text-nurse-primary dark:text-cyan-400 bg-slate-50/50 dark:bg-slate-900/30; }

      .label-tooltip { @apply text-nurse-secondary ml-1 cursor-help hover:text-nurse-primary transition-colors text-xs; }
      .glass-meta { @apply relative backdrop-blur-md border border-white/20 p-4 rounded-xl shadow-sm transition-all duration-300 flex items-center gap-4; }
      .glass-meta-blue { @apply bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100 border-l-4 border-blue-500; }
      .glass-meta-orange { @apply bg-orange-50 dark:bg-orange-900/20 text-orange-900 dark:text-orange-100 border-l-4 border-orange-500; }
      .toast-msg { @apply pointer-events-auto bg-slate-900 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 font-bold text-sm min-w-[320px] border-l-4 border-nurse-secondary; animation: slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
      .tag-pill-footer { @apply px-3 py-1.5 bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-300 rounded-lg text-[11px] font-bold hover:bg-nurse-accent hover:text-white transition-all cursor-pointer; }
    }
    @keyframes slide-in { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    #pdf-render-template { position: absolute; left: -9999px; top: 0; width: 794px; min-height: 1123px; background: white; padding: 40px; color: #0f172a; display: flex; flex-direction: column; }
  </style>
</head>
<body class="flex flex-col min-h-screen">

  <!-- BACKGROUND DECORATIVO -->
  <div class="fixed inset-0 z-[-1] pointer-events-none opacity-20 dark:opacity-10">
    <svg width="100%" height="100%" viewBox="0 0 1440 1000" preserveAspectRatio="none">
        <path d="M-100,200 C300,150 600,350 1500,250" fill="none" stroke="#00bcd4" stroke-width="2" />
        <path d="M-100,600 C400,550 800,700 1600,500" fill="none" stroke="#1A3E74" stroke-width="2" />
    </svg>
  </div>

  <div id="notification-container" class="fixed top-6 right-6 z-[10000] flex flex-col gap-3 pointer-events-none"></div>
  <div id="accessibility-container"></div>
  <div id="header-container" class="sticky top-0 z-50 bg-white dark:bg-nurse-bgDark min-h-[70px] transition-opacity duration-500 opacity-50 shadow-sm"></div>

  <main id="main-content" class="flex-grow max-w-7xl mx-auto px-4 pt-24 pb-8 md:py-12 w-full">
    
    <!-- BREADCRUMB -->
    <nav class="flex items-center gap-2 text-sm text-slate-600 dark:text-cyan-300 mb-8 font-semibold" aria-label="Breadcrumb">
        <a href="index.html" class="hover:underline text-nurse-accent">Início</a>
        <i class="fa-solid fa-chevron-right text-[10px]"></i>
        <a href="ferramentas.html" class="hover:underline text-nurse-accent">Ferramentas</a>
        <i class="fa-solid fa-chevron-right text-[10px]"></i>
        <span class="hidden md:inline hover:underline text-nurse-accent cursor-pointer text-nurse-accent font-bold">Escalas Clínicas</span>
        <i class="fa-solid fa-chevron-right text-[10px] hidden md:inline"></i>
        <span class="text-nurse-primary dark:text-cyan-400 font-bold">Índice de Apgar</span>
    </nav>

    <!-- HEADER DA PÁGINA -->
    <header class="max-w-4xl mb-12">
      <span class="bg-nurse-primary text-white text-[11px] font-bold px-4 py-2 rounded-full uppercase tracking-widest mb-4 inline-block shadow-md">Escalas Clínicas</span>
      <h1 class="text-4xl md:text-5xl lg:text-6xl mb-6 leading-tight">Índice de Apgar Neonatal</h1>
      <div class="h-2 w-24 bg-gradient-to-r from-nurse-accent to-nurse-primary rounded-full mb-8"></div>
      <p class="text-xl text-slate-600 dark:text-slate-300 font-medium italic">Protocolo para avaliação rápida da vitalidade do recém-nascido e necessidade de reanimação.</p>
    </header>

    <div class="grid lg:grid-cols-[1fr,340px] gap-10 items-start">
      
      <!-- FERRAMENTA -->
      <article class="card-base p-0">
         <nav class="flex border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/30">
            <button onclick="switchTab('calc')" id="btn-tab-calc" class="tab-btn active">Escala</button>
            <button onclick="switchTab('sobre')" id="btn-tab-sobre" class="tab-btn">Sobre</button>
            <button onclick="switchTab('ajuda')" id="btn-tab-ajuda" class="tab-btn">Instruções</button>
            <button onclick="switchTab('tecnico')" id="btn-tab-tecnico" class="tab-btn">Técnico</button>
         </nav>

         <div class="p-6 md:p-10">
            <!-- ABA: ESCALA -->
            <section id="pane-calc" class="tab-pane space-y-10">
                <div class="space-y-6">
                    <h3 class="text-xs font-black uppercase tracking-widest text-nurse-primary/50 mb-4 border-b pb-2">Dados do Recém-Nascido</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label for="patient_name" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                Identificação do RN <i class="fa-solid fa-circle-info label-tooltip" title="Nome do RN ou identificação da mãe conforme Meta 1"></i>
                            </label>
                            <input id="patient_name" type="text" placeholder="Ex: RN de Maria Santos" class="input-field"/>
                        </div>
                        <div>
                            <label for="patient_birthdate" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                Data e Hora Nascimento <i class="fa-solid fa-circle-info label-tooltip" title="Essencial para o cálculo exato de vida em minutos/horas"></i>
                            </label>
                            <input id="patient_birthdate" type="datetime-local" class="input-field text-sm" onchange="calculateExactAge()"/>
                            <p id="age-display" class="text-xs text-nurse-secondary font-bold mt-1 ml-1 hidden"></p>
                        </div>
                    </div>

                    <h3 class="text-xs font-black uppercase tracking-widest text-nurse-primary/50 mb-4 pt-4 border-b pb-2">Parâmetros de Avaliação: <span class="text-red-500">*</span></h3>
                    <div class="space-y-4">
                        <!-- 1. Cor -->
                        <div>
                            <label for="apgar_cor" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                1. Aparência (Cor) <i class="fa-solid fa-circle-info label-tooltip" title="Avalia a oxigenação periférica do recém-nascido."></i>
                            </label>
                            <select id="apgar_cor" class="input-field cursor-pointer font-bold">
                                <option value="">Selecione...</option>
                                <option value="2">2 - Completamente rosado</option>
                                <option value="1">1 - Corpo rosado, extremidades cianóticas</option>
                                <option value="0">0 - Cianose central ou palidez</option>
                            </select>
                        </div>
                        <!-- 2. FC -->
                        <div>
                            <label for="apgar_fc" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                2. Pulso (Frequência Cardíaca) <i class="fa-solid fa-circle-info label-tooltip" title="Parâmetro mais importante. Use estetoscópio ou palpação do cordão."></i>
                            </label>
                            <select id="apgar_fc" class="input-field cursor-pointer font-bold">
                                <option value="">Selecione...</option>
                                <option value="2">2 - Superior a 100 bpm</option>
                                <option value="1">1 - Inferior a 100 bpm</option>
                                <option value="0">0 - Ausente</option>
                            </select>
                        </div>
                        <!-- 3. Irritabilidade -->
                        <div>
                            <label for="apgar_irritabilidade" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                3. Caretas (Irritabilidade Reflexa) <i class="fa-solid fa-circle-info label-tooltip" title="Resposta à estimulação (ex: aspiração de vias aéreas)."></i>
                            </label>
                            <select id="apgar_irritabilidade" class="input-field cursor-pointer font-bold">
                                <option value="">Selecione...</option>
                                <option value="2">2 - Espirros, tosses ou choro vigoroso</option>
                                <option value="1">1 - Caretas, choro discreto</option>
                                <option value="0">0 - Sem resposta</option>
                            </select>
                        </div>
                        <!-- 4. Atividade -->
                        <div>
                            <label for="apgar_tonus" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                4. Atividade (Tônus Muscular) <i class="fa-solid fa-circle-info label-tooltip" title="Avalia a flexão das extremidades e movimentação."></i>
                            </label>
                            <select id="apgar_tonus" class="input-field cursor-pointer font-bold">
                                <option value="">Selecione...</option>
                                <option value="2">2 - Movimentação ativa e boa flexão</option>
                                <option value="1">1 - Alguma flexão de extremidades</option>
                                <option value="0">0 - Flácido (Hipotônico)</option>
                            </select>
                        </div>
                        <!-- 5. Respiração -->
                        <div>
                            <label for="apgar_resp" class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2">
                                5. Respiração (Esforço) <i class="fa-solid fa-circle-info label-tooltip" title="Avalia a regularidade da respiração e o vigor do choro."></i>
                            </label>
                            <select id="apgar_resp" class="input-field cursor-pointer font-bold">
                                <option value="">Selecione...</option>
                                <option value="2">2 - Choro forte, respiração regular</option>
                                <option value="1">1 - Choro fraco, respiração irregular</option>
                                <option value="0">0 - Ausente</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 pt-4">
                    <button id="btn-avaliar-main" onclick="calcularApgar()" class="btn-primary-action"><i class="fa-solid fa-clipboard-list"></i> Avaliar</button>
                    <button onclick="resetForm()" class="btn-secondary-action"><i class="fa-solid fa-rotate-left"></i> Limpar</button>
                </div>

                <!-- RESULTADOS -->
                <div id="results-wrapper" class="hidden animate-fade-in pt-8 border-t border-slate-200 dark:border-slate-700">
                    <div class="bg-slate-50 dark:bg-slate-800/50 rounded-3xl p-8 text-center border-2 border-dashed border-nurse-primary/20 mb-10">
                        <p class="text-[10px] text-slate-400 font-black uppercase tracking-[0.3em] mb-4">Pontuação Apgar</p>
                        <div id="res-total" class="text-6xl md:text-8xl font-black text-[#1A3E74] dark:text-cyan-400 tracking-tighter font-nunito leading-none">0</div>
                        <p class="text-lg font-black mt-4 uppercase tracking-widest" id="res-status-text">---</p>
                    </div>

                    <div class="flex flex-wrap gap-4 justify-center mb-10">
                        <button onclick="gerarPDF()" class="btn-action-equal bg-nurse-primary text-white hover:bg-nurse-secondary"><i class="fa-solid fa-file-pdf"></i> Gerar PDF</button>
                        <button onclick="copiarResumo()" class="btn-action-equal bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200"><i class="fa-solid fa-copy"></i> Copiar Resumo</button>
                    </div>

                    <div class="card-base p-6 border-l-4 border-nurse-accent bg-slate-50 dark:bg-slate-900/40 mb-10">
                        <h3 class="text-sm font-black uppercase tracking-widest text-nurse-primary mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-book-medical"></i> Diagnóstico NANDA-I
                        </h3>
                        <button onclick="showNanda()" class="w-full sm:w-auto bg-nurse-accent text-white px-6 py-3 rounded-xl font-bold text-xs uppercase tracking-widest hover:brightness-110 transition shadow-lg h-12 flex items-center justify-center gap-2">
                            Pesquisar Diagnósticos <i class="fa-solid fa-magnifying-glass text-white/70"></i>
                        </button>
                    </div>

                    <!-- AUDITORIA DO CÁLCULO -->
                    <div class="mb-12 space-y-6">
                         <h3 class="text-xs font-black uppercase tracking-widest mb-6 flex items-center gap-2 border-b pb-2"><i class="fa-solid fa-clipboard-check text-nurse-secondary"></i> Auditoria do Cálculo</h3>
                         
                         <div class="space-y-4">
                            <!-- Dados -->
                            <div class="bg-slate-50 dark:bg-slate-800/40 rounded-2xl p-5 border border-slate-100 dark:border-slate-700">
                                <p class="text-[10px] font-black uppercase text-slate-400 mb-3 tracking-widest">Dados do Paciente</p>
                                <div class="flex justify-between text-sm">
                                    <span class="font-bold text-slate-600 dark:text-slate-300">Paciente:</span>
                                    <span id="audit-nome" class="font-black text-nurse-primary dark:text-cyan-400">---</span>
                                </div>
                                <div class="flex justify-between text-sm mt-2">
                                    <span class="font-bold text-slate-600 dark:text-slate-300">Idade no Exame:</span>
                                    <span id="audit-idade" class="font-bold text-slate-500">---</span>
                                </div>
                            </div>

                            <!-- Parâmetros -->
                            <div class="bg-slate-50 dark:bg-slate-800/40 rounded-2xl p-5 border border-slate-100 dark:border-slate-700">
                                <p class="text-[10px] font-black uppercase text-slate-400 mb-3 tracking-widest">Parâmetros de Avaliação</p>
                                <div id="audit-params-list" class="space-y-2 text-[11px] font-bold text-slate-600 dark:text-slate-400 italic"></div>
                            </div>

                            <!-- Fórmula -->
                            <div class="bg-nurse-primary/5 dark:bg-nurse-primary/20 rounded-2xl p-5 border border-nurse-primary/10">
                                <div class="flex justify-between items-center">
                                    <span class="text-[10px] font-black uppercase text-nurse-primary">Fórmula Aplicada:</span>
                                    <span id="res-formula-box" class="font-mono text-xs font-black text-nurse-primary dark:text-cyan-400">---</span>
                                </div>
                                <div class="flex justify-between items-center mt-4 pt-4 border-t border-nurse-primary/10">
                                    <span class="text-[10px] font-black uppercase text-nurse-primary">Resultado Final:</span>
                                    <span id="audit-score-detail" class="font-black text-lg text-nurse-primary dark:text-cyan-400">---</span>
                                </div>
                            </div>
                         </div>
                    </div>

                    <!-- SEGURANÇA -->
                    <section>
                        <h2 class="text-xl md:text-2xl font-black text-center mb-8 flex items-center justify-center gap-3 text-nurse-primary dark:text-cyan-400">
                            <i class="fa-solid fa-shield-virus"></i> Segurança Neonatal
                        </h2>
                        <div class="space-y-8">
                            <div>
                                <h3 class="text-xs font-black uppercase tracking-widest mb-4 border-b border-slate-200 dark:border-slate-700 pb-2">9 Certos de Medicação</h3>
                                <div id="checklist-9certos" class="grid grid-cols-1 md:grid-cols-2 gap-2"></div>
                            </div>
                            <div>
                                <h3 class="text-xs font-black uppercase tracking-widest mb-4 border-b border-slate-200 dark:border-slate-700 pb-2">Metas Internacionais</h3>
                                <div id="checklist-metas" class="space-y-2"></div>
                            </div>
                        </div>
                    </section>
                </div>
            </section>

            <!-- ABA SOBRE -->
            <section id="pane-sobre" class="tab-pane hidden prose prose-slate dark:prose-invert max-w-none">
                <h2 class="text-2xl font-black mb-4">Sobre o Índice de Apgar</h2>
                <p>Criado pela Dra. Virginia Apgar em 1952, este índice é a principal ferramenta para avaliar a vitalidade imediata do recém-nascido e a resposta a manobras de reanimação.</p>
                <p>O exame deve ser realizado rotineiramente no <strong>1º e 5º minutos de vida</strong>. Pontuações entre 8 e 10 indicam boa vitalidade, enquanto valores abaixo de 7 indicam algum grau de depressão neonatal.</p>
            </section>

            <section id="pane-ajuda" class="tab-pane hidden prose prose-slate dark:prose-invert max-w-none">
                <h2 class="text-2xl font-black mb-4">Instruções de Uso</h2>
                <ol class="space-y-2 text-sm">
                    <li>Insira o nome e horário exato do nascimento.</li>
                    <li>Selecione cada um dos 5 parâmetros observados clinicamente.</li>
                    <li>O sistema classificará a vitalidade (Normal, Moderada ou Grave).</li>
                    <li>Gere o PDF para registro no prontuário neonatal.</li>
                </ol>
            </section>

            <section id="pane-tecnico" class="tab-pane hidden prose prose-slate dark:prose-invert max-w-none">
                <h2 class="text-2xl font-black mb-4 text-nurse-primary uppercase tracking-widest">Referências Bibliográficas</h2>
                <div class="bg-slate-100 dark:bg-slate-800 p-6 rounded-2xl text-sm leading-relaxed border border-slate-200 dark:border-slate-700">
                    <p class="mb-4">APGAR, V. A proposal for a new method of evaluation of the newborn infant. <strong>Anesth. Analg.</strong>, v. 32, p. 260-267, 1953.</p>
                    <p class="mb-4">SOCIEDADE BRASILEIRA DE PEDIATRIA. <strong>Diretrizes do Programa de Reanimação Neonatal da SBP</strong>. Rio de Janeiro: SBP, 2022.</p>
                    <p>BRASIL. Ministério da Saúde. <strong>Protocolo de Identificação do Paciente</strong>. Brasília: Ministério da Saúde, 2013.</p>
                </div>
            </section>
         </div>
      </article>

      <!-- SIDEBAR -->
      <aside class="space-y-6 sticky top-28 self-start">
         <div class="sidebar-module">
            <h3 class="border-b-2 border-white/20 pb-4 mb-5 font-bold flex items-center gap-3 text-xl text-white font-nunito"><i class="fa-solid fa-trophy"></i> Desafio Clínico</h3>
            <p class="text-sm text-white/90 mb-6 font-medium leading-relaxed font-inter italic">Teste sua agilidade em simulações neonatais reais.</p>
            <button onclick="redirectSimulados()" class="w-full bg-white text-nurse-primary font-black py-3 rounded-xl hover:bg-slate-100 transition shadow-lg text-sm uppercase tracking-wide">Acessar Simuladores <i class="fa-solid fa-bolt ml-1"></i></button>
         </div>

         <div class="sidebar-module from-teal-700 to-nurse-secondary shadow-nurse-accent/20">
            <h3 class="border-b-2 border-white/20 pb-4 mb-5 font-bold flex items-center gap-3 text-xl text-white font-nunito"><i class="fas fa-share-alt"></i> Compartilhar</h3>
            <div class="flex gap-3 flex-wrap justify-start">
                <button class="share-btn hover:text-blue-600" onclick="share('facebook')"><i class="fab fa-facebook-f"></i></button>
                <button class="share-btn hover:text-green-500" onclick="share('whatsapp')"><i class="fab fa-whatsapp"></i></button>
                <button class="share-btn hover:text-blue-800" onclick="share('linkedin')"><i class="fab fa-linkedin-in"></i></button>
                <button class="share-btn hover:text-gray-300" onclick="copyLink()"><i class="fas fa-link"></i></button>
            </div>
         </div>
         
         <div class="card-base p-6 flex items-center justify-center min-h-[250px] bg-slate-50 dark:bg-slate-800/50 border-dashed border-2">
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Publicidade AdSense</span>
         </div>
      </aside>
    </div>

    <!-- SEÇÃO AUTOR -->
    <section class="max-w-7xl mx-auto px-4 py-16 border-t border-slate-200 dark:border-slate-800 mt-24">
        <div class="bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 flex flex-col md:flex-row gap-12 items-center border border-slate-200 dark:border-slate-700 shadow-2xl relative overflow-hidden group">
            <div class="absolute top-0 right-0 w-32 h-32 bg-nurse-secondary/5 rounded-full -mr-16 -mt-16 transition-transform group-hover:scale-110"></div>
            <img src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" alt="Autor" class="w-32 h-32 rounded-full object-cover shadow-2xl border-4 border-white dark:border-slate-700 z-10"/>
            <div class="text-center md:text-left z-10 flex-grow">
                <h3 class="text-3xl font-black mb-3 text-nurse-primary dark:text-cyan-400 font-nunito tracking-tight">Calculadoras de Enfermagem</h3>
                <p class="text-slate-600 dark:text-slate-300 text-lg leading-relaxed max-w-3xl font-inter italic">"A precisão clínica nos primeiros minutos de vida é decisiva para o prognóstico neonatal. Nossas ferramentas automatizam a aplicação das escalas para que você foque no cuidado imediato."</p>
            </div>
        </div>
        <div class="flex flex-wrap gap-2 items-center justify-center md:justify-start mt-10">
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest mr-4 flex items-center"><i class="fa-solid fa-tags mr-2"></i> Tópicos:</span>
            <span class="tag-pill-footer">#EscalasClínicas</span><span class="tag-pill-footer">#Neonatologia</span><span class="tag-pill-footer">#Apgar</span><span class="tag-pill-footer">#SaúdeDaCriança</span>
        </div>
    </section>

    <!-- RELACIONADOS -->
    <section id="related-section" class="bg-slate-100/50 dark:bg-nurse-bgDark py-24 border-t border-slate-300 dark:border-slate-800 -mx-4 px-4 mt-24">
        <div class="max-w-7xl mx-auto text-center">
            <h2 class="text-3xl font-black mb-16 flex items-center justify-center gap-4 font-nunito"><i class="fa-solid fa-layer-group text-nurse-accent"></i> Ferramentas Relacionadas</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <a href="aldrete.html" class="group card-base overflow-hidden bg-white hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 flex flex-col h-full text-left">
                    <div class="relative h-48 bg-nurse-primary/5 flex items-center justify-center overflow-hidden shrink-0">
                        <i class="fa-solid fa-clipboard-check text-6xl text-nurse-primary group-hover:scale-110 transition-transform duration-700"></i>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <h3 class="text-xl font-black mb-2 group-hover:text-nurse-secondary transition-colors font-nunito">Índice de Aldrete</h3>
                        <p class="text-slate-500 text-sm mb-6 flex-grow">Alta segura da Recuperação Pós-Anestésica.</p>
                        <span class="text-nurse-secondary text-sm font-bold flex items-center gap-2">Acessar <i class="fa-solid fa-arrow-right-long ml-2"></i></span>
                    </div>
                </a>
                <a href="gestacional.html" class="group card-base overflow-hidden bg-white hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 flex flex-col h-full text-left">
                    <div class="relative h-48 bg-nurse-secondary/5 flex items-center justify-center overflow-hidden shrink-0">
                        <i class="fa-solid fa-calendar-day text-6xl text-nurse-secondary group-hover:scale-110 transition-transform duration-700"></i>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <h3 class="text-xl font-black mb-2 group-hover:text-nurse-secondary transition-colors font-nunito">Idade Gestacional</h3>
                        <p class="text-slate-500 text-sm mb-6 flex-grow">Cálculo por DUM e Ultrassonografia.</p>
                        <span class="text-nurse-secondary text-sm font-bold flex items-center gap-2">Acessar <i class="fa-solid fa-arrow-right-long ml-2"></i></span>
                    </div>
                </a>
                <a href="balanco-hidrico.html" class="group card-base overflow-hidden bg-white hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 flex flex-col h-full text-left">
                    <div class="relative h-48 bg-nurse-accent/5 flex items-center justify-center overflow-hidden shrink-0">
                        <i class="fa-solid fa-chart-line text-6xl text-nurse-accent group-hover:scale-110 transition-transform duration-700"></i>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <h3 class="text-xl font-black mb-2 group-hover:text-nurse-secondary transition-colors font-nunito">Balanço Hídrico</h3>
                        <p class="text-slate-500 text-sm mb-6 flex-grow">Controle de perdas e ganhos neonatais.</p>
                        <span class="text-nurse-secondary text-sm font-bold flex items-center gap-2">Acessar <i class="fa-solid fa-arrow-right-long ml-2"></i></span>
                    </div>
                </a>
            </div>
        </div>
    </section>
  </main>

  <div id="footer-container" class="relative z-10 bg-nurse-primary dark:bg-slate-900 min-h-[150px] transition-opacity duration-500"></div>
  
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/event-bus-v4.js" defer></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/header-v4.js" defer></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/footer-v4.js" defer></script>
  <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/accessibility-v4.js" defer></script>

  <!-- TEMPLATE PDF OCULTO -->
  <div id="pdf-render-template">
    <div style="flex: 1; display: flex; flex-direction: column;">
      <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid #1A3E74; padding-bottom: 10px; margin-bottom: 20px;">
        <img src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/images/author-info.webp" style="height: 50px;" alt="Logo"/>
        <div style="text-align: right;">
          <h1 style="font-family: 'Nunito Sans', sans-serif; font-size: 18px; color: #1A3E74; margin: 0; font-weight: 900; text-transform: uppercase;">Registro de Índice de Apgar</h1>
          <p style="font-size: 9px; color: #64748b; margin: 0; font-weight: 600;">AVALIAÇÃO NEONATAL IMEDIATA</p>
        </div>
      </div>
      <div id="pdf-body" style="font-size: 10px; font-family: 'Inter', sans-serif; flex: 1;"></div>
    </div>
    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: flex-end;">
      <div style="font-size: 8px; color: #94a3b8;"><p id="pdf-footer-timestamp" style="margin: 0; font-weight: 700;"></p></div>
      <div id="pdf-qrcode-container" style="width: 60px; height: 60px;"></div>
    </div>
  </div>

  <script>
    const APP_STATE = { data: null, exactAge: null };
    const CONSTS = {
        CERTOS: ["Paciente certo", "Medicamento certo", "Dose certa", "Via certa", "Hora certa", "Registro certo", "Orientação certa", "Resposta certa", "Validade certa"],
        METAS: [ { id: 1, text: "Identificar corretamente o paciente", class: "glass-meta-blue" }, { id: 2, text: "Melhorar a comunicação efetiva", class: "glass-meta-orange" }, { id: 6, text: "Prevenção de Quedas (Berço)", class: "glass-meta-blue" } ]
    };

    const safeSet = (id, val, isHTML=false) => { const el=document.getElementById(id); if(el) el[isHTML?'innerHTML':'innerText']=val; };
    const showNotification = (msg) => {
        const c=document.getElementById('notification-container'); if(!c)return;
        const t=document.createElement('div'); t.className='toast-msg'; t.innerHTML=`<i class="fa-solid fa-circle-info text-nurse-secondary text-lg"></i><span>${msg}</span>`;
        c.appendChild(t); setTimeout(()=>{t.style.opacity='0';t.style.transform='translateX(50px)';setTimeout(()=>t.remove(),500)},3500);
    };

    function calculateExactAge() {
        const el = document.getElementById('patient_birthdate');
        const display = document.getElementById('age-display');
        if (!el.value) { display.classList.add('hidden'); return; }

        const birth = new Date(el.value);
        const now = new Date();
        const diffMs = now - birth;

        if (diffMs < 0) { showNotification("Hora de nascimento não pode ser futura!"); el.value = ""; display.classList.add('hidden'); return; }

        const diffMinutes = Math.floor(diffMs / 60000);
        const hours = Math.floor(diffMinutes / 60);
        const mins = diffMinutes % 60;
        const days = Math.floor(hours / 24);

        let ageStr = days > 0 ? `${days}d ` : "";
        ageStr += `${hours % 24}h ${mins}min de vida`;

        APP_STATE.exactAge = ageStr;
        display.innerText = ageStr;
        display.classList.remove('hidden');
    }

    function calcularApgar() {
        const cor = document.getElementById('apgar_cor');
        const fc = document.getElementById('apgar_fc');
        const irr = document.getElementById('apgar_irritabilidade');
        const tonus = document.getElementById('apgar_tonus');
        const resp = document.getElementById('apgar_resp');
        
        const name = document.getElementById('patient_name')?.value || "Não Identificado";

        if (!cor.value || !fc.value || !irr.value || !tonus.value || !resp.value) {
            return showNotification("Selecione todos os 5 parâmetros!");
        }

        const score = parseInt(cor.value) + parseInt(fc.value) + parseInt(irr.value) + parseInt(tonus.value) + parseInt(resp.value);
        
        let status = score >= 8 ? "BOM ESTADO GERAL (NORMAL)" : (score >= 5 ? "DEPRESSÃO MODERADA" : "DEPRESSÃO GRAVE (ASFIXIA)");
        let color = score >= 8 ? "text-green-500" : (score >= 5 ? "text-yellow-500" : "text-red-500");

        APP_STATE.data = {
            name,
            age: APP_STATE.exactAge || "N/A",
            paramsText: [cor.options[cor.selectedIndex].text, fc.options[fc.selectedIndex].text, irr.options[irr.selectedIndex].text, tonus.options[tonus.selectedIndex].text, resp.options[resp.selectedIndex].text],
            paramsVal: [cor.value, fc.value, irr.value, tonus.value, resp.value],
            total: score,
            status,
            timestamp: new Date().toLocaleString()
        };

        safeSet('res-total', score);
        const st = document.getElementById('res-status-text');
        st.innerText = status;
        st.className = `text-lg font-black mt-4 uppercase tracking-widest ${color}`;
        
        safeSet('res-formula-box', `${cor.value} + ${fc.value} + ${irr.value} + ${tonus.value} + ${resp.value} = ${score}`);
        safeSet('audit-nome', name); 
        safeSet('audit-idade', APP_STATE.exactAge || "Horário não informado");
        safeSet('audit-score-detail', `${score} Pontos (${status})`);
        safeSet('audit-params-list', APP_STATE.data.paramsText.map(t => `<p>• ${t}</p>`).join(''), true);

        safeSet('checklist-9certos', CONSTS.CERTOS.map(c=>`
          <div class="flex items-center gap-2 p-3 bg-white dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-700 transition">
             <input type="checkbox" class="w-4 h-4 accent-nurse-primary">
             <span class="text-[11px] font-bold text-slate-600 dark:text-slate-300 flex-grow">${c}</span>
             <label class="text-[9px] font-black uppercase text-slate-400 flex items-center gap-1 cursor-pointer hover:text-nurse-secondary">
               <input type="checkbox" class="accent-slate-400 w-3 h-3"> N/A
             </label>
          </div>`).join(''), true);

        safeSet('checklist-metas', CONSTS.METAS.map(m=>`<label class="glass-meta ${m.class} cursor-pointer hover:scale-[1.01] transition"><input type="checkbox" class="w-5 h-5 accent-white shrink-0"><span class="text-xs font-black uppercase">${m.id}. ${m.text}</span></label>`).join(''), true);
        
        document.getElementById('results-wrapper').classList.remove('hidden');
        document.getElementById('results-wrapper').scrollIntoView({ behavior: 'smooth' });
        showNotification("Cálculo realizado!");
    }

    async function gerarPDF() {
        if (!APP_STATE.data) return;
        const d = APP_STATE.data;
        safeSet('pdf-footer-timestamp', `Registro: ${d.timestamp}`);
        safeSet('pdf-body', `
            <div style="padding:15px;background:#f8fafc;border-radius:10px;margin-bottom:15px;border:1px solid #eee;">
                <p>RN: <strong>${d.name}</strong> | Idade no Exame: <strong>${d.age}</strong></p>
            </div>
            <div style="padding:20px;border:2px solid #1A3E74;border-radius:15px;margin-bottom:15px;">
                <p style="font-weight:900;text-transform:uppercase;border-bottom:1px solid #eee;margin-bottom:10px;padding-bottom:5px;">Escore de Apgar</p>
                <ul style="list-style:none;padding:0;font-size:9px;">
                   ${d.paramsText.map(t => `<li style="margin-bottom:4px;">• ${t}</li>`).join('')}
                </ul>
                <div style="margin-top:15px;padding-top:10px;border-top:1px solid #eee;display:flex;justify-content:space-between;">
                   <span style="font-weight:900;color:#1A3E74;">TOTAL:</span>
                   <span style="font-weight:900;color:#1A3E74;font-size:16px;">${d.total} / 10</span>
                </div>
                <p style="text-align:right;font-weight:900;font-size:10px;color:${d.total >= 8 ? '#16a34a' : (d.total >= 5 ? '#eab308' : '#dc2626')}">${d.status}</p>
            </div>`, true);

        const qc = document.getElementById('pdf-qrcode-container');
        if (qc) { qc.innerHTML = ''; new QRCode(qc, { text: window.location.href, width: 60, height: 60 }); }
        
        try {
            const canvas = await html2canvas(document.getElementById('pdf-render-template'), { scale: 2 });
            const doc = new window.jspdf.jsPDF('p', 'pt', 'a4');
            doc.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, doc.internal.pageSize.getWidth(), (canvas.height * doc.internal.pageSize.getWidth()) / canvas.width);
            doc.save(`Apgar-${d.name.replace(/\s+/g, '-')}.pdf`);
        } catch (e) { console.error(e); }
    }

    function copiarResumo() {
        if (!APP_STATE.data) return;
        const d = APP_STATE.data;
        const t = `APGAR: ${d.total}/10 (${d.status})\nRN: ${d.name}\nIdade: ${d.age}\nAudit: ${d.paramsVal.join('+')}=${d.total}\n${d.timestamp}`;
        navigator.clipboard.writeText(t).then(() => showNotification("Resumo Copiado!"));
    }

    function switchTab(id) {
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.add('hidden'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`pane-${id}`)?.classList.remove('hidden');
        document.getElementById(`btn-tab-${id}`)?.classList.add('active');
    }

    function resetForm() {
        document.querySelectorAll('input, select').forEach(i => i.value = '');
        document.getElementById('results-wrapper').classList.add('hidden');
        document.getElementById('age-display').classList.add('hidden');
        APP_STATE.data = null; APP_STATE.exactAge = null;
        showNotification("Limpado!");
    }
    
    function showNanda() { window.open(`https://www.google.com/search?q=${encodeURIComponent('NANDA diagnósticos enfermagem recém nascido vitalidade apgar')}`, '_blank'); }
    function redirectSimulados() { window.open('https://simulados-para-enfermagem.com.br/', '_blank'); }
    function copyLink() { navigator.clipboard.writeText(window.location.href); showNotification("Link copiado!"); }
    function share(p) {
        const u = encodeURIComponent(window.location.href);
        const m = { whatsapp: `https://api.whatsapp.com/send?text=${u}`, facebook: `https://www.facebook.com/sharer/sharer.php?u=${u}`, linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${u}` };
        if(m[p]) window.open(m[p], '_blank');
    }
  </script>
</body>
</html>