<!-- WIDGETS LATERAIS -->
<div id="side-widgets" class="side-widgets-container">
    <div class="accessibility-widget">
        <!-- Botão Customizado VLibras -->
        <button type="button" aria-label="Abrir tradutor de libras" onclick="toggleLibras()">
            <i class="fas fa-sign-language fa-lg" aria-hidden="true"></i>
        </button>
        <!-- Botão Menu Acessibilidade -->
        <button id="accessibility-btn" type="button" aria-label="Abrir menu de recursos assistivos" onclick="toggleAccessibilityPanel()">
            <i class="fas fa-eye fa-lg" aria-hidden="true"></i>
        </button>
    </div>
</div>

<!-- PAINEL DE ACESSIBILIDADE -->
<aside id="accessibility-panel" class="accessibility-panel-hidden" role="dialog" aria-modal="true" aria-labelledby="panel-title">
    
    <!-- Header -->
    <header class="panel-header shiny-header-border">
        <div class="flex items-center gap-2">
            <!-- Caminho ajustado para a raiz -->
            <img src="assets/images/author-info.webp" alt="Logo Calculadoras de Enfermagem" class="w-10 h-10 object-contain">
            <span id="panel-title" class="sr-only">Menu de Acessibilidade</span>
        </div>
        <div class="flex items-center gap-1">
            <button onclick="toggleMaximizePanel()" class="icon-btn sm-hidden" title="Expandir Menu" aria-label="Expandir tamanho do menu">
                <i data-lucide="maximize-2" class="w-4 h-4" aria-hidden="true"></i>
            </button>
            <button id="close-panel-btn" onclick="toggleAccessibilityPanel()" class="icon-btn" aria-label="Fechar menu">
                <i data-lucide="x" class="w-5 h-5" aria-hidden="true"></i>
            </button>
        </div>
    </header>

    <!-- Conteúdo com Scroll -->
    <div class="panel-content custom-scrollbar">
        
        <!-- Navegação -->
        <section class="mb-6">
            <h4 class="section-title">Navegação</h4>
            <div class="grid grid-cols-2 gap-2">
                <div class="accessibility-card" onclick="toggleSimpleFeature('highlight-links', this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                    <span class="card-label">Destaque de Links</span>
                </div>
                <div class="accessibility-card" onclick="toggleSimpleFeature('highlight-headers', this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><path d="M4 12h16"></path><path d="M4 6v12"></path><path d="M12 6v12"></path><path d="M20 6v12"></path></svg>
                    <span class="card-label">Destaque Títulos</span>
                </div>
                <div class="accessibility-card" onclick="cycleFeature('readingMask', ['sm', 'md', 'lg'], this)">
                    <div class="level-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="level-badge"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line></svg>
                    <span class="card-label">Máscara de Leitura</span>
                </div>
                <div class="accessibility-card" onclick="toggleSimpleFeature('structure', this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
                    <span class="card-label">Estrutura</span>
                </div>
                <div class="accessibility-card" onclick="toggleSimpleFeature('hide-images', this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
                    <span class="card-label">Ocultar Imagens</span>
                </div>
                <div class="accessibility-card" onclick="toggleSimpleFeature('stop-anim', this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line></svg>
                    <span class="card-label">Pausar Animações</span>
                </div>
            </div>
        </section>

        <!-- Texto -->
        <section class="mb-6">
            <h4 class="section-title">Texto e Leitura</h4>
            <div class="grid grid-cols-2 gap-2">
                <div class="accessibility-card" onclick="cycleFeature('fontSize', ['1.2', '1.5', '2.0'], this)">
                    <div class="level-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="level-badge"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>
                    <span class="card-label">Tamanho de Fonte</span>
                </div>
                <div class="accessibility-card" onclick="toggleSimpleFeature('bold-text', this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path></svg>
                    <span class="card-label">Negrito</span>
                </div>
                <div class="accessibility-card" onclick="cycleFeature('letterSpacing', ['0.1em', '0.2em', '0.3em'], this)">
                    <div class="level-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="level-badge"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line></svg>
                    <span class="card-label">Espaço Letras</span>
                </div>
                <div class="accessibility-card" onclick="cycleFeature('fontFamily', ['atkinson', 'newsreader', 'dyslexic'], this)">
                    <div class="level-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
                    <span class="level-badge"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><path d="M4 7V4h16v3M9 20h6M12 4v16"></path></svg>
                    <span class="card-label">Fonte</span>
                </div>
            </div>
        </section>

        <!-- Cores e Som -->
        <section class="mb-6">
            <h4 class="section-title">Cores e Som</h4>
            <div class="grid grid-cols-2 gap-2">
                <div class="accessibility-card" onclick="cycleFeature('contrast', ['contrast-dark', 'contrast-inverted'], this)">
                    <div class="level-indicator"><div class="dot"></div><div class="dot"></div></div>
                    <span class="level-badge"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    <span class="card-label">Contraste</span>
                </div>
                <div class="accessibility-card" onclick="toggleTTS(this)">
                    <div class="level-indicator"><div class="dot"></div></div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 icon-slot" aria-hidden="true"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                    <span class="card-label">Leitor TTS</span>
                </div>
            </div>
        </section>
    </div>

    <!-- Rodapé CTA (Overlay Azul) -->
    <div class="menu-cta-overlay">
        <button onclick="resetAllFeatures()" class="btn-restore">
            <i data-lucide="rotate-ccw" class="w-4 h-4" aria-hidden="true"></i>
            Restaurar Recursos
        </button>
    </div>
</aside>

<!-- Máscaras de Leitura Globais -->
<div id="reading-mask-top"></div>
<div id="reading-mask-bottom"></div>

<!-- Integração VLibras (Elemento Oculto) -->
<div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
        <div class="vw-plugin-top-wrapper"></div>
    </div>
</div>