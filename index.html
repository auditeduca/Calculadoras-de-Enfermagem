<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculadoras de Enfermagem - Ferramentas e Conteúdo Técnico para Profissionais de Saúde.">
    <meta name="theme-color" content="#1A3E74">
    <title>Calculadoras de Enfermagem | Modular</title>

    <!-- Preconnect & Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS (Play CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1A3E74',
                        accent: '#1e40af',
                    }
                }
            }
        }
    </script>

    <!-- CSS Modules - Carregamento de todos os estilos fornecidos -->
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/global.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/preload.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/header.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/global-main-index.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/accessibility.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/modals.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/footer.css">

    <style>
        /* Ajuste para evitar pulo de layout (FOUC) enquanto os componentes carregam */
        [id$="-container"] { min-height: 1px; }
        #main-container { min-height: 80vh; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- 1. Componente de Preload (Crítico) -->
    <div id="preload-container"></div>

    <!-- 2. Componente de Acessibilidade -->
    <div id="accessibility-container"></div>

    <!-- 3. Header / Navegação -->
    <div id="header-container"></div>

    <!-- 4. Conteúdo Principal (Injetado dinamicamente) -->
    <main id="main-container" class="pt-[140px]">
        <!-- O conteúdo de main-index.html entrará aqui -->
        <div class="flex justify-center items-center h-64">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
        </div>
    </main>

    <!-- 5. Footer -->
    <div id="footer-container"></div>

    <!-- 6. Modais e Popups -->
    <div id="modals-container"></div>

    <!-- SCRIPTS CORE & UTILS -->
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/console-cleaner.js"></script>
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/utils.js"></script>

    <!-- LÓGICA DE CARREGAMENTO MODULAR (Orquestração Nativa) -->
    <script>
        /**
         * Motor de Injeção de Componentes
         * Carrega os arquivos HTML externos nos seus respectivos contêineres.
         */
        const ComponentLoader = {
            async fetchAndInject(url, containerId) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`Erro ao carregar: ${url}`);
                    const html = await response.text();
                    document.getElementById(containerId).innerHTML = html;
                    console.log(`[Loader] ${containerId} carregado.`);
                    return true;
                } catch (error) {
                    console.error(`[Loader] Erro em ${containerId}:`, error);
                    return false;
                }
            },

            async init() {
                // Definição do mapeamento de componentes
                const components = [
                    { url: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/preload.html', id: 'preload-container' },
                    { url: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/accessibility.html', id: 'accessibility-container' },
                    { url: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/header.html', id: 'header-container' },
                    { url: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/footer.html', id: 'footer-container' },
                    { url: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/components/modals.html', id: 'modals-container' },
                    { url: 'https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/pages/main-index.html', id: 'main-container' }
                ];

                // Carrega todos simultaneamente
                await Promise.all(components.map(c => this.fetchAndInject(c.url, c.id)));
                
                // Dispara evento global quando tudo estiver pronto para os scripts específicos iniciarem
                window.dispatchEvent(new CustomEvent('ModulesLoaded'));
            }
        };

        // Inicia o carregamento
        document.addEventListener('DOMContentLoaded', () => ComponentLoader.init());
    </script>

    <!-- SCRIPTS DOS COMPONENTES (Carregados após a estrutura básica) -->
    <!-- Nota: Estes scripts geralmente contêm a lógica de clique, animação e cálculos -->
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/preload.js" defer></script>
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/header.js" defer></script>
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/accessibility.js" defer></script>
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/global-main-index.js" defer></script>
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/modals.js" defer></script>
    <script src="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/js/footer.js" defer></script>

</body>
</html>